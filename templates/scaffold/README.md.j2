# {{ goal_title }}

{{ goal_description if goal_description else "Multi-agent conversational AI system" }}

## Overview

This project was generated by GoalGen - a code generator for multi-goal, persistent, cross-device conversational agent systems.

**Goal ID**: `{{ goal_id }}`
**Version**: {{ version }}

## Architecture

### Agents
{% for agent_name, agent in agents.items() %}
- **{{ agent_name }}** ({{ agent.kind }})
  - Max loops: {{ agent.max_loop | default(5) }}
  - Tools: {{ agent.tools | join(', ') if agent.tools else 'None' }}
  {% if agent.llm_config and agent.llm_config.model %}- Model: {{ agent.llm_config.model }}
  {% endif %}
{% endfor %}

{% if tools %}
### Tools
{% for tool_name, tool in tools.items() %}
- **{{ tool_name }}** ({{ tool.type }})
  {% if tool.type == 'http' and tool.spec %}
  - URL: {{ tool.spec.url | default('Not specified') }}
  {% if tool.spec.timeout %}- Timeout: {{ tool.spec.timeout }}s
  {% endif %}
  {% endif %}
{% endfor %}
{% endif %}

{% if tasks %}
### Tasks
{% for task in tasks %}
{{ loop.index }}. **{{ task.id }}** ({{ task.type }})
   {% if task.type == 'task' %}- Agent: {{ task.agent }}
   - Tools: {{ task.tools | join(', ') if task.tools else 'None' }}
   {% elif task.type == 'evaluator' %}- Evaluator: {{ task.evaluator }}
   {% endif %}
{% endfor %}
{% endif %}

## Directory Structure

```
{{ goal_id }}/
├── README.md                     # This file
├── LICENSE
├── .gitignore
├── infra/                        # Azure Bicep infrastructure
│   ├── main.bicep
│   ├── modules/
│   └── parameters.*.json
├── orchestrator/                 # FastAPI Bot Orchestrator
│   ├── app/
│   ├── Dockerfile
│   └── requirements.txt
├── langgraph/                    # LangGraph workflow
│   ├── quest_builder.py
│   ├── agents/
│   ├── evaluators/
│   └── checkpointer_adapter.py
{% if ux and ux.teams and ux.teams.enabled %}├── teams_app/                    # Microsoft Teams Bot
│   ├── manifest.json
│   └── adaptive_cards/
{% endif %}{% if ux and ux.webchat and ux.webchat.enabled %}├── webchat/                      # Web chat SPA
│   ├── src/
│   ├── package.json
│   └── vite.config.ts
{% endif %}├── tools/                        # Tool implementations
{% if tools %}{% for tool_name in tools.keys() %}│   ├── {{ tool_name }}/
{% endfor %}{% endif %}│   └── ...
├── prompts/                      # Prompt templates
├── assets/                       # Static resources
├── ci/                           # CI/CD configuration
├── scripts/                      # Deployment scripts
└── tests/                        # Test infrastructure
```

## Prerequisites

- Python 3.11+
{% if ux and ux.webchat and ux.webchat.enabled %}- Node.js 18+ (for webchat)
{% endif %}- Azure CLI
- Docker
- Azure subscription

## Quick Start

### 1. Install Dependencies

#### Backend (Orchestrator)
```bash
cd orchestrator
pip install -r requirements.txt
```

#### LangGraph
```bash
cd langgraph
pip install -r requirements.txt
```

{% if ux and ux.webchat and ux.webchat.enabled %}#### Webchat
```bash
cd webchat
npm install
```
{% endif %}

### 2. Configure Environment

```bash
cp orchestrator/.env.sample orchestrator/.env
# Edit .env with your configuration
```

Required environment variables:
- `OPENAI_API_KEY` - OpenAI API key
- `KEYVAULT_URL` - Azure Key Vault URL
- `COSMOS_ENDPOINT` - Cosmos DB endpoint
{% if tools %}{% for tool_name in tools.keys() %}- `{{ tool_name | upper }}_API_KEY` - {{ tool_name }} API key
{% endfor %}{% endif %}

### 3. Run Locally

#### Start Orchestrator
```bash
cd orchestrator
uvicorn app.main:app --reload
```

{% if ux and ux.webchat and ux.webchat.enabled %}#### Start Webchat (optional)
```bash
cd webchat
npm run dev
```
{% endif %}

### 4. Deploy to Azure

{% if deployment and deployment.environments and deployment.environments.dev %}
```bash
# Deploy infrastructure
cd infra
az deployment group create \
  --resource-group {{ deployment.environments.dev.resource_group }} \
  --template-file main.bicep \
  --parameters parameters.dev.json

# Deploy application
cd scripts
./deploy.sh dev
```
{% else %}
```bash
# Deploy infrastructure
cd infra
az deployment group create \
  --resource-group rg-{{ goal_id }}-dev \
  --template-file main.bicep \
  --parameters parameters.dev.json

# Deploy application
cd scripts
./deploy.sh dev
```

**Note:** No deployment configuration specified in spec. Using default resource group: `rg-{{ goal_id }}-dev`
{% endif %}

## Configuration

{% if state_management %}
### State Management

{% if state_management.checkpointing %}- **Backend**: {{ state_management.checkpointing.backend | default('memory') }}
{% endif %}{% if state_management.threads %}- **Thread ID Strategy**: {{ state_management.threads.id_generation.strategy | default('uuid') }}
{% endif %}{% if state_management.serialization %}- **Serialization**: {{ state_management.serialization.format | default('json') }}
{% if state_management.serialization.compression and state_management.serialization.compression.enabled %}- **Compression**: {{ state_management.serialization.compression.algorithm }}
{% endif %}{% endif %}
{% else %}
### State Management

- **Backend**: memory (default)
- **Thread ID Strategy**: uuid (default)
- **Serialization**: json (default)

**Note:** No state management configuration specified in spec. Using defaults.
{% endif %}

{% if authentication %}
### Authentication

{% if authentication.backend %}- **Backend Services**: {{ authentication.backend.type | default('managed_identity') }} ({{ authentication.backend.identity_type | default('system_assigned') }})
{% endif %}{% if authentication.frontend %}- **Frontend**: {{ authentication.frontend.type | default('entra_id') }}
{% endif %}
{% else %}
### Authentication

- **Backend Services**: managed_identity (default)
- **Frontend**: entra_id (default)

**Note:** No authentication configuration specified in spec. Using defaults.
{% endif %}

{% if api and api.versioning %}
### API

- **Version**: {{ api.versioning.current_version | default('v1') }}
- **Base Path**: {{ api.versioning.base_path | default('/api/v1/goal/' + goal_id) }}
{% endif %}

## Testing

```bash
# Unit tests
pytest tests/unit/

# Integration tests
pytest tests/integration/

# E2E tests
pytest tests/e2e/
```

{% if deployment and deployment.monitoring %}
## Monitoring

- **Application Insights**: {{ 'Enabled' if deployment.monitoring.app_insights else 'Disabled' }}
- **Log Analytics**: {{ 'Enabled' if deployment.monitoring.log_analytics else 'Disabled' }}
{% else %}
## Monitoring

- **Application Insights**: Enabled (default)
- **Log Analytics**: Enabled (default)

**Note:** No monitoring configuration specified in spec. Using defaults.
{% endif %}

## Support

For issues or questions, please refer to the GoalGen documentation.

## License

{{ 'MIT' }}

---

**Generated by GoalGen** - https://github.com/anthropics/goalgen
